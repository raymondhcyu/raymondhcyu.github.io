<!DOCTYPE html>
<html>
	<head>
        <link rel="icon" type="image/png" href="../images/mapMarkerBlue.png">
        <meta name="viewport" content="width=device-width, initial-scale=1">
		<meta charset = "utf-8">
		<title>Germoney</title>

		<style>
		html, body { /*Optional, outside size of web page*/
			margin: 0;
			padding: 0;
			width: 100%;
			height: 600px;
		}

		#map_canvas {
			width: 100%; /*full width of web page*/
			height: 100%; /*full height of web page*/
		}

		h3 {
		color: black;
		font-family: calibri;
		}
		</style>

	<body onload="initialize()">
		<h3>Let's go to Germany (Berlin)!</h3>
		<div id = "map_canvas"></div>

		<script>
		// web service URL
		var DATA_SERVICE_URL = "https://script.google.com/macros/s/AKfycbw74ktH2vI6Ov-_8fT2ECpRtlEF1207l32NAyowMzLKGvpZPFyR/exec?jsonp=callback";

		var map;
		var startZoom = 2;
		var startLat = 0; // only executed once anyways, not continuous execution loop
		var startLng = 0;

		function initialize() {
			map = new google.maps.Map(document.getElementById('map_canvas'), {
				center: new google.maps.LatLng(startLat, startLng),
				scaleControl: true,
				zoom: startZoom,
				maxZoom: 20,
				mapTypeId: 'roadmap' // change map type to suit
			});

			// unsure what this does
			var scriptElement = document.createElement('script');
			scriptElement.src = DATA_SERVICE_URL;
			document.getElementsByTagName('head')[0].appendChild(scriptElement); // unsure what this does
		}

		function callback(data) {
			var i = 0;
			var latColumn = 9; // enter column number for latitude coordinate from sheets
			var lngColumn = 8; // enter column number for longitude coordinate from sheets
			var titleColumn = 1; // enter "" for title from sheets
			var numColumns = data[1].length; // number of columns with parameters like Title, Cost, Address, etc.

			console.log("data[1].length: " + data[1].length);
			console.log("data.length: " + data.length);

			for (i = 1; i < data.length; i++) { // depends where lat/lng rows start
				if (data[i][latColumn] == '') { // determine if cell is empty
					console.log("Null condition.");
				}
				else {
					var marker = new google.maps.Marker({ // display marker icon on map
						position: new google.maps.LatLng(data[i][latColumn], data[i][lngColumn]), // longlat coordinates from Sheets, columns 8 and 9
						map: map, // referred to map
						animation: google.maps.Animation.DROP,
						title: data[i][titleColumn] // name for icon
					});

					console.log("True condition.");
				}
			}

			// i = 21 exiting the "for" loop, but counting from 0-20 = 21 values
			i = i - 1; // i = 20 now

			<!-- // content for infowindow -->
			<!-- var contentstring = '<div id = "content">' + -->
				<!-- // '<p><b>pouvez-vous le vois?</b></p>' +  -->
				<!-- '<b>' +  -->
				<!-- 'name: ' + -->
				<!-- '</b>' + -->
				<!-- data[18][titlecolumn] + -->
				<!-- '</div>'; -->

			<!-- var infoWindow = new google.maps.InfoWindow({ -->
				<!-- content: contentString -->
			<!-- }); -->

			<!-- marker.addListener('click', function() { -->
				<!-- infoWindow.open(map, marker); -->
			<!-- }); -->

			console.log("Finis.");

			// future: reset to average long/lat centroid of JSON points and/or fit all points in zoom
			// startLat = data[1][0];
			// startLng = data[1][1];
			startLat = data[5][9];
			startLng = data[5][8];
			startZoom = 12;
		}

		</script>
		<script> console.log("Finis, vraiment.") // executed first before callback below </script>

		<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCp7A6U__CFBzdFKSF_EvXG4snFpd7k2vY&callback=initialize"
  type="text/javascript"></script>

	</head>
	</body>
</html>
